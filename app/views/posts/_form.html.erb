
<%= form_with model: post, multipart: true, class: "space-y-6" do |f| %>
  <!-- Error Messages -->
  <% if post.errors.any? %>
    <div class="bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg">
      <h3 class="font-bold mb-2"><%= pluralize(post.errors.count, "error") %> prohibited this post from being saved:</h3>
      <ul class="list-disc list-inside">
        <% post.errors.full_messages.each do |message| %>
          <li><%= message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>
  
  <!-- Title Field -->
  <div>
    <%= f.label :title, class: "block text-sm font-medium text-gray-700 mb-2" %>
    <%= f.text_field :title,
        placeholder: "Enter post title...",
        class: "w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500" %>
  </div>
  
  <!-- Featured Image Upload -->
  <div>
    <%= f.label :featured_image, "Featured Image", class: "block text-sm font-medium text-gray-700 mb-2" %>
    
    <!-- Show current image if exists -->
    <% if post.featured_image.attached? %>
      <div class="mb-4">
        <%= image_tag post.featured_image, class: "w-48 h-48 object-cover rounded-lg" %>
        <p class="text-sm text-gray-500 mt-2">Current image (upload a new one to replace)</p>
      </div>
    <% end %>
    
    <%= f.file_field :featured_image,
        accept: "image/png,image/jpg,image/jpeg,image/gif",
        class: "w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500" %>
    <p class="text-sm text-gray-500 mt-1">Accepted formats: PNG, JPG, JPEG, GIF. Max size: 5MB</p>
  </div>
  
  <!-- Rich Text Content Field -->
  <div>
    <%= f.label :content, "Content", class: "block text-sm font-medium text-gray-700 mb-2" %>
    <%= f.rich_text_area :content,
        placeholder: "Write your post content here...",
        class: "w-full border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500" %>
    <p class="text-sm text-gray-500 mt-1">Use the toolbar to format your text, add links, images, etc.</p>
  </div>
  
  <!-- Published At Field (Optional) -->
  <div>
    <%= f.label :published_at, "Publish Date (optional)", class: "block text-sm font-medium text-gray-700 mb-2" %>
    <%= f.datetime_local_field :published_at,
        value: (post.published_at || Time.current).strftime("%Y-%m-%dT%H:%M"),
        class: "w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500" %>
    <p class="text-sm text-gray-500 mt-1">Leave as is to publish immediately, or set a future date to schedule</p>
  </div>
  
  <!-- Submit Button -->
  <div>
    <%= f.submit class: "w-full px-6 py-3 bg-indigo-600 text-white font-medium rounded-lg hover:bg-indigo-700 transition cursor-pointer" %>
  </div>
<% end %>
